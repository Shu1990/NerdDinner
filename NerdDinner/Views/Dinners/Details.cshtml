@model NerdDinner.Models.Dinner

<script src="/Scripts/MicrosoftAjax.js" type="text/javascript"></script>
<script src="/Scripts/MicrosoftMvcAjax.js" type="text/javascript"></script>

@{
    ViewBag.Title = "Details";
}


<h2>
    @Html.DisplayFor(model => model.Title)
</h2>

<p>
    <strong>When:</strong>
    @Html.DisplayFor(model => model.EventDate)
</p>
<p>
    <strong>Where:</strong>
    @Html.DisplayFor(model => model.Address),
    @Html.DisplayFor(model => model.Country)
</p>
<p>
    <strong>Description:</strong>
    @Html.DisplayFor(model => model.Description)
</p>
<p>
    <strong>Organizer:</strong>
    @Html.DisplayFor(model => model.HostedBy)
    @Html.DisplayFor(model => model.ContactPhone)
</p>


<div id="rsvpmsg">
    @if (Request.IsAuthenticated) { 
        if (Model.IsUserRegistered(Context.User.Identity.Name)) {
            <p>You are registered for this event!</p>
        } else
        {
            Ajax.ActionLink("RSVP for this event",
                            "Register", "RSVP",
                            new {id = Model.DinnerID},
                            new AjaxOptions {UpdateTargetId = "rsvpmsg"});
        }
    } else {
        <a href="/Account/Logon">Logon</a> 
        <text> to RSVP for this event.</text>
    }
</div>







@if (Model.IsHostedBy(Context.User.Identity.Name))
{
    @Html.ActionLink("Edit", "Edit", new {id = Model.DinnerID}) 
    <text>|</text>
    @Html.ActionLink("Delete Dinner", "Delete", new {id = Model.DinnerID})
}



